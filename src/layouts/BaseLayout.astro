---
/*
 * (C) Copyright 2023 Miles Pernicious
 *
 * SPDX-License-Identifier: MIT
 */

import "@styles/main.scss";

import Metadata from "@layouts/Metadata.astro";

import Masthead from '@components/layout/Masthead.astro';
import Footer from "@components/layout/Footer.astro";

import { SiteConfig } from "@config";

const { title, description } = Astro.props;

let pageTitle = title;
let pageDescription = description || SiteConfig.description;
if (pageTitle) {
	pageTitle = pageTitle.concat(" ", SiteConfig.titleSeparator, " ", SiteConfig.title);
}
else {
	pageTitle = SiteConfig.title;
}
---

<!DOCTYPE html>
<html lang="en">
	<head>
		<Metadata title={pageTitle} description={pageDescription} />
	</head>
	<body id="body">
		<div id="backdrop"><slot name="backdrop" /></div>
		<header id="masthead">
			<Masthead class:list={[{ 'hero-surface-overlay': Astro.slots.has('backdrop') }]} />
		</header>
		<div id="content">
			<slot />
		</div>
		<footer id="footer"><Footer /></footer>
	</body>
</html>

<style lang="scss">
	#body {
		display: grid;
		grid-template-columns: 1fr;
		grid-template-rows: 100px 1fr 60px;
		column-gap: 0px;
		row-gap: 0px;
		@media (max-width: 640px) {
			grid-template-rows: 100px 1fr 100px;
		}
	}

	#backdrop { grid-area: 1 / 1 / 4 / 2; }
	#masthead { grid-area: 1 / 1 / 2 / 2; }
	#content { grid-area: 2 / 1 / 3 / 2; overflow-y: scroll; }
	#footer { grid-area: 3 / 1 / 4 / 2; }
</style>
